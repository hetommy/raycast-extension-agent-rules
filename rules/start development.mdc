---
description: Raycast Extension Development Best Practices
alwaysApply: false
---

# Raycast Extension Development

## Project Structure

Raycast extensions follow a specific structure:

```
extension-name/
├── package.json          # Extension metadata and dependencies
├── src/
│   ├── index.tsx         # Main entry point
│   ├── components/       # React components
│   ├── lib/             # Utility functions
│   └── types/           # TypeScript type definitions
├── assets/              # Icons and other assets
├── .eslintrc.js         # ESLint configuration
├── tsconfig.json        # TypeScript configuration
└── README.md           # Extension documentation
```

## Starting Development on an Extension

When a user says "@start development.mdc on {extension-name}", the assistant should:

### **Assistant Workflow**

1. **Search for Extension**
   - Use `glob_file_search` to find the extension directory
   - Look for patterns like `**/{extension-name}/package.json`
   - If not confident about the extension location, ask the user to confirm

2. **Verify Extension Found**
   - Confirm the extension directory exists
   - Check that it has a valid `package.json` with Raycast extension metadata
   - If multiple matches found, ask user to clarify which one

3. **Follow Development Setup**
   - Navigate to the specific extension directory
   - Pull latest changes from origin
   - Ask user what feature/bug/improvement they want to work on
   - Create and checkout to a new feature branch
   - Install dependencies
   - Start development server
   - Verify extension is running

### **User Workflow**

When starting development on a specific extension, follow this workflow:

### 1. **Locate Extension Directory**
```bash
# Navigate to the specific extension directory
cd "extensions/extensions/{extension-name}"
```

### 2. **Verify Extension Structure**
- Confirm `package.json` exists in the extension directory
- Check that the extension has the expected Raycast extension structure

### 3. **Git Workflow**
```bash
# Pull latest changes from origin
git pull origin main

# Ask user what they want to work on, then create feature branch
# Examples: feature/add-dark-mode, bugfix/fix-search-error, improvement/update-ui
git checkout -b feature/your-feature-name
```

### 4. **Install Dependencies**
```bash
# Install dependencies in the extension directory
npm install
```

### 5. **Start Development Server**
```bash
# Start Raycast development mode (preferred)
ray develop

# OR use npm script if available
npm run dev
```

### 6. **Verify Extension is Running**
- Check Raycast for the extension commands
- Test basic functionality
- Verify hot reload is working

## Git Workflow Best Practices

### **Branch Naming Conventions**
```bash
# Feature branches
feature/add-new-command
feature/improve-ui
feature/add-preferences

# Bug fix branches
bugfix/fix-search-error
bugfix/resolve-crash
bugfix/typo-in-readme

# Improvement branches
improvement/update-dependencies
improvement/refactor-code
improvement/optimize-performance

# Hotfix branches (for urgent fixes)
hotfix/security-patch
hotfix/critical-bug
```

### **Git Commands for Development**
```bash
# Check current status
git status

# Add changes
git add .

# Commit with descriptive message
git commit -m "feat: add new search functionality"

# Push feature branch
git push origin feature/your-branch-name

# Switch back to main
git checkout main

# Delete local feature branch after merge
git branch -d feature/your-branch-name
```

### **Commit Message Format**
Follow conventional commits:
- `feat:` for new features
- `fix:` for bug fixes
- `docs:` for documentation changes
- `style:` for formatting changes
- `refactor:` for code refactoring
- `test:` for adding tests
- `chore:` for maintenance tasks

## Essential Commands

```bash
# Install dependencies (run in extension directory)
npm install

# Start development mode (run in extension directory)
ray develop
# OR
npm run dev

# Build for production
npm run build

# Lint code
npm run lint

# Fix linting issues
npm run fix-lint

# Type check
npm run type-check

# Publish extension
npm run publish
```

## Key Development Principles

### 1. **TypeScript First**
- Always use TypeScript for new extensions
- Define proper types for all props and state
- Use strict TypeScript configuration

### 2. **React Best Practices**
- Use functional components with hooks
- Implement proper error boundaries
- Follow Raycast's design patterns

### 3. **Performance Considerations**
- Lazy load components when possible
- Optimize bundle size
- Use proper memoization

### 4. **Error Handling**
- Implement comprehensive error handling
- Provide user-friendly error messages
- Log errors appropriately

## Common Patterns

### Action Component
```tsx
import { ActionPanel, Action, List } from "@raycast/api";

export default function Command() {
  return (
    <List>
      <List.Item
        title="Example Item"
        actions={
          <ActionPanel>
            <Action.OpenInBrowser url="https://example.com" />
            <Action.CopyToClipboard content="example" />
          </ActionPanel>
        }
      />
    </List>
  );
}
```

### Form Component
```tsx
import { Form, ActionPanel, Action } from "@raycast/api";

export default function Command() {
  return (
    <Form
      actions={
        <ActionPanel>
          <Action.SubmitForm title="Submit" onSubmit={handleSubmit} />
        </ActionPanel>
      }
    >
      <Form.TextField id="name" title="Name" placeholder="Enter name" />
      <Form.TextArea id="description" title="Description" />
    </Form>
  );
}
```

## API Usage

### Preferences
```tsx
import { getPreferenceValues } from "@raycast/api";

interface Preferences {
  apiKey: string;
  baseUrl: string;
}

const preferences = getPreferenceValues<Preferences>();
```

### Local Storage
```tsx
import { LocalStorage } from "@raycast/api";

// Store data
await LocalStorage.setItem("key", "value");

// Retrieve data
const value = await LocalStorage.getItem("key");
```

### Clipboard
```tsx
import { Clipboard } from "@raycast/api";

// Copy to clipboard
await Clipboard.copy("text to copy");

// Paste from clipboard
const text = await Clipboard.paste();
```

## Testing Guidelines

1. **Test all user flows** - Ensure every action works as expected
2. **Test error scenarios** - Handle network failures, invalid inputs
3. **Test performance** - Ensure extensions load quickly
4. **Test accessibility** - Follow accessibility guidelines

## Publishing Checklist

Before publishing an extension:

- [ ] All TypeScript errors resolved
- [ ] ESLint passes without errors
- [ ] Extension builds successfully
- [ ] All functionality tested
- [ ] README updated with usage instructions
- [ ] Icons and assets properly sized
- [ ] Preferences configured correctly
- [ ] Error handling implemented
- [ ] Performance optimized

## Troubleshooting

### Development Setup Issues

1. **"Could not read package.json" Error**
   - **Cause**: Running commands from wrong directory (project root instead of extension directory)
   - **Solution**: Always `cd` into the specific extension directory first
   - **Example**: `cd "extensions/extensions/extension-name" && npm install`

2. **Extension Not Found**
   - **Cause**: Extension name doesn't match directory name
   - **Solution**: Use `glob_file_search` to locate the extension
   - **Ask user**: "I found multiple extensions. Did you mean [extension-name]?"

3. **Development Server Not Starting**
   - **Cause**: Missing dependencies or incorrect directory
   - **Solution**: Run `npm install` in extension directory, then `ray develop`

4. **Git Pull Conflicts**
   - **Cause**: Local changes conflict with remote changes
   - **Solution**: Stash local changes, pull, then apply stash: `git stash && git pull && git stash pop`

5. **Branch Already Exists**
   - **Cause**: Feature branch name already exists locally
   - **Solution**: Use different branch name or delete existing: `git branch -D old-branch-name`

### Common Issues

1. **Extension not loading**: Check `package.json` and entry point
2. **TypeScript errors**: Verify `tsconfig.json` configuration
3. **Build failures**: Check for missing dependencies
4. **Runtime errors**: Review error boundaries and error handling

### Debug Tips

- Use `console.log` for debugging (visible in Raycast's developer tools)
- Check Raycast's developer console for errors
- Test with different input scenarios
- Verify API endpoints are accessible
- Always run commands from the extension directory, not the project root

